---
file: convert_csv_to_rdf.html
short: "CSV to RDF: convert CSV to RDF"
subtitle: Convert CSV to RDF
title: Converting tabular data to RDF
---

<div class="row">
  <p class="col s4 flow-text">
    <a href="{% link _tutorials/csv-to-rdf/convert_excel_to_csv.html %}" rel="prev">&larr; Previous step</a>
  </p>
  <p class="col s4 offset-s4 right-align flow-text">
    <a href="{% link _tutorials/csv-to-rdf/clean_data.html %}" rel="next">&rarr; Next step</a>
  </p>
</div>

<p class="flow-text">Now that we have CSV files, our next task is to convert them to RDF.
To narrow down the concerns considered in this step we perform only syntactical conversion to the RDF data model.
We separate further post-processing of the data into the subsequent steps.</p>

<ul class="collapsible popout" data-collapsible="accordion">
  <li>
    <div class="collapsible-header"><i class="material-icons">open_with</i>Sample CSV input</div>
    <div class="collapsible-body">
      <table class="responsive-table">
        <thead>
          <tr>
            <th>NUTS_3</th>
            <th>LAU1_NAT_CODE</th>
            <th>LAU2_NAT_CODE</th>
            <th>CHANGE</th>
            <th>NAME_1</th>
            <th>NAME_2_LAT</th>
            <th>POP</th>
            <th>AREA</th>
            <th>sheet_name</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>FI194</td>
            <td>146</td>
            <td>005</td>
            <td>no</td>
            <td>Alajärvi</td>
            <td>Alajärvi</td>
            <td>10006</td>
            <td>1056740000</td>
            <td>FI</td>
          </tr>
          <tr>
            <td>FI196</td>
            <td>041</td>
            <td>050</td>
            <td>no</td>
            <td>Eura</td>
            <td>Eura</td>
            <td>12128</td>
            <td>630200000</td>
            <td>FI</td>
          </tr>
          <tr>
            <td>FI193</td>
            <td>131</td>
            <td>592</td>
            <td>no</td>
            <td>Petäjävesi</td>
            <td>Petäjävesi</td>
            <td>4008</td>
            <td>495420000</td>
            <td>FI</td>
          </tr>
        </tbody>
      </table>
    </div>
  </li>
</ul>

<p class="flow-text">LP-ETL provides the <a href="{% link _components/t-tabular.html %}">Tabular</a> component for turning CSV into RDF.
Tabular implements the standard mapping specified in the W3C Recommendation <a href="https://www.w3.org/TR/csv2rdf">Generating RDF from Tabular Data on the Web</a>.
There are several options that allow us to customize the output of this component.</p>

<div class="row">
  <div class="col s12 m6 offset-m3">
    <img alt="Pipeline with Tabular"
         class="responsive-img"
         data-caption="Pipeline with Tabular"
         src="{% link /assets/tutorials/csv-to-rdf/img/pipeline_with_tabular.png %}"/>
  </div>
</div>

<p class="flow-text">The option <em>Table has header row</em> is on by default and we leave it as such, since our CSV inputs contain headers with column names.
However, some of the sheets converted to CSV contain empty columns and, consequently, their headers are empty too.
Tabular would raise an error when provided with an empty header, since it needs a column name to generate an IRI for the RDF property the column values are mapped to.
We could work around the empty columns by switching the <em>Table has header row</em> option off.
In that case, Tabular would treat the first row as data and would instead generate synthetic property IRIs based on the numeric column indices (i.e. <code>column_1</code> <code>column_2</code> etc.).
Nevertheless, in this way we would lose the associations between the column values and their meaning.
We could hardwire the associations to the generated column names, but in our case the order of columns may change per sheet, so hardwiring is infeasible.
We can handle the empty columns by switching on the <em>Generate names for null header cells</em> option.
It instructs Tabular to generate synthetic names for empty headers.
Since the values in the empty columns are missing, switching this option on effectively ignores these columns.</p>

<div class="row">
  <div class="col s12 m8 offset-m2">
    <img alt="Tabular configuration, part 1"
         class="responsive-img"
         data-caption="Tabular configuration, part 1"
         src="{% link /assets/tutorials/csv-to-rdf/img/tabular_initial_config.png %}"/>
  </div>
</div>

<p class="flow-text">We also turn on the option <em>Trim whitespace from cells</em> to get rid of insignificant whitespace.
Instead of the <em>Default row and property IRIs</em> we specify a fixed property IRI base.
We choose <code>http://example.com/</code> as a placeholder namespace to use for the IRIs of properties.
The particular choice of a namespace does not matter in our case, since we treat Tabular's output as intermediate data, subject to further processing. 
If we do not provide this option, the default row and property IRIs are derived from the input's file name.
Since we have multiple CSV files, Tabular would generate different IRIs for the same columns shared across the files.
Providing a fixed namespace avoids this problem, so that columns sharing the same name end up using the same properties.</p>

<p class="flow-text">We leave the rest of Tabular's configuration as is by default.
If the input had a column with a unique key for each row, we could use it directly in the IRI template to generate IRIs for the output rows.
As we learn later in this tutorial, our dataset has keys spread in multiple columns, so we stick to the default blank nodes for rows and generate IRIs in later processing.
We do not need to skip any rows, but the <em>Rows skipped</em> options can be employed to ignore the header row and generate synthetic property IRIs instead.
We use the default option <em>Data only</em> since we do not need to generate structural metadata about the input CSV files.
Finally, we keep the switch <em>Using CSV on the Web mapping</em> on.
Instead of providing a custom mapping directly in Tabular, we map the data in follow-up data processing.</p>

<div class="row">
  <div class="col s12 m8 offset-m2">
    <img alt="Tabular configuration, part 2"
         class="responsive-img"
         data-caption="Tabular configuration, part 2"
         src="{% link /assets/tutorials/csv-to-rdf/img/tabular_end_config.png %}"/>
  </div>
</div>

<ul class="collapsible popout" data-collapsible="accordion">
  <li>
    <div class="collapsible-header"><i class="material-icons">open_with</i>Sample RDF output</div>
    <div class="collapsible-body">
{% highlight turtle %}
@prefix : <http://example.com/> .

[ :AREA "1056740000" ;
  :CHANGE "no" ;
  :LAU1_NAT_CODE "146" ;
  :LAU2_NAT_CODE "005" ;
  :NAME_1 "Alajärvi" ;
  :NAME_2_LAT "Alajärvi" ;
  :NUTS_3 "FI194" ;
  :POP "10006" ;
  :sheet_name "FI" ] .

[ :AREA "630200000" ;
  :CHANGE "no" ;
  :LAU1_NAT_CODE "041" ;
  :LAU2_NAT_CODE "050" ;
  :NAME_1 "Eura" ;
  :NAME_2_LAT "Eura" ;
  :NUTS_3 "FI196" ;
  :POP "12128" ;
  :sheet_name "FI" ] .

[ :AREA "495420000" ;
  :CHANGE "no" ;
  :LAU1_NAT_CODE "131" ;
  :LAU2_NAT_CODE "592" ;
  :NAME_1 "Petäjävesi" ;
  :NAME_2_LAT "Petäjävesi" ;
  :NUTS_3 "FI193" ;
  :POP "4008" ;
  :sheet_name "FI" ] .
{% endhighlight %}
    </div>
  </li>
</ul>

<p class="flow-text">The pipeline that includes the steps described so far in the tutorial can be downloaded <a href="{% link /assets/tutorials/csv-to-rdf/pipelines/lau_with_excel_to_rdf.jsonld %}">here</a>.</p>

<div class="row">
  <p class="col s4 flow-text">
    <a href="{% link _tutorials/csv-to-rdf/convert_excel_to_csv.html %}" rel="prev">&larr; Previous step</a>
  </p>
  <p class="col s4 offset-s4 right-align flow-text">
    <a href="{% link _tutorials/csv-to-rdf/clean_data.html %}" rel="next">&rarr; Next step</a>
  </p>
</div>
